<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script src="https://koda.nu/simple.js">
  
        var zombies = []; //Skapar en lista, ifall jag vill lägga till mer zombies behöver jag bara skriva in ett tal inom bracketen
        
        var player = {x: random(totalWidth), y: random(totalHeight), speed: random(1,5)} //Denna variabel lägger spelaren "player" på en slumpmässig x och y kordinat. Samt ger spelaren en viss hastiget.
        
        var i = 0; //Ger variabeln "i" en mäng som i detta fall är 0. 
        
        var hp = 250; //Men denna gör jag likt variabeln över fast jag ger istället "hp" mängden 250
        
        var sp = 250; //Här gör jag samma sak fast med variabeln "sp" och samma mängd 250
      
        while (i < 1) //Denna kod skapar självaste zombien som i koden under ger den sin storlek, höjd och hastighet.
        {
          zombies.push({x: random(totalWidth), y: random(totalHeight), speed: random(1,5)});  //Här skapas zombien liksom player fast man använder sig av totalWidth och height istället. För att ge en mer exakt zombie.
          
          i += 1;
        }
      
         function update() //Denna funktion menar en konstant uppdatering, detta gör så att spelet kan fortsätta
          {
              clearScreen()
             
            
              
                var i = 0; //Ger variabeln i en nolla.
            
                var t = 0; //Ger variabeln t en nolla.
            
              
            
              rectangle(200,20,hp,30,"darkblue"); //Detta är då rectangeln som visar mitt hp, hur mycket liv jag har
            
              rectangle(600,20,sp,30,"red"); //Medans denna visar rektangeln som visar hur mycket "speed points" jag har kvar. Alltså hur mycket jag kan springa
            
              
             
            
           
            
              
              circle(player.x, player.y, 20, "blue") //Detta är då spelaren som sätts på en slumpmässig plats på x och y axeln.
           
                if (keyboard.d) { //Gör så att spelaren går mot höger om x-axeln när man trycker på "d" plus ger en hastighet, "Speed" till x-kordinaten.
                player.x +=5;
                player.x += player.speed;
              }
              
                  if (keyboard.a){ //Gör så att spelaren går mot vänster om x-axeln när man trycker på "a" plus ger "speed" x-kordinaten.
                player.x -= 5;
                player.x -= player.speed;
              }
                  if (keyboard.w){ //Gör så att spelaren går uppåt om y-axeln när man trycker på "w" plus ger "speed" y-kordinaten.
                player.y -= 5;
                player.y -= player.speed;
              }
                   if (keyboard.s){ //Gör så att spelaren går neråt om y-axeln när man trycker på "s" plus ger "speed" y-kordinaten.
                player.y += 5;
                player.y += player.speed;
               }
            
              if (sp > 0){ //Här bestämmer man att detta kommer bara aktiveras om "Speed points" är större än noll. Detta detta gör så att rektangeln inte kan åka baklänges. 
                if (keyboard.e) //Gör så att koden går igång ifall man trycker e. Men också om du håller inne e. 
                  player.speed = 3; //Gör så att spelarens hastighet ökar med 3
                else
                  player.speed = 0 //Ifall rektangeln som visar "speed points" blir mindre än noll så får man ingen extra hastighet
      
                if (keyboard.e) //Sedan vill man också att ens "speed points" går ner när man trycker på e
                  sp -= 4;     // Här går ens "speed points" ner med 4 varje gång du trycker e. Men också ifall du håller inne e 
                if (sp < 250) //Detta gör så att man inte kan ha mer än 250 "speed points" så att rektangeln inte blir oändlig
                  sp += 1; //Gör så att det läggs till 1 varje sekund på ens "speed points" 
              }
              else
                if (keyboard.e) //Detta är en kopia av koden som gör att man inte kan springa efter att man har tagit slut på sin sp
                  player.speed = 0;
                else
                  player.speed = 0
      
                if (keyboard.e)
                  sp -= 0;
                if (sp < 250)
                  sp += 1;
            
            
              while (i < 1) //Liksom koden som pushade zombies
              {
                
                var zombie = zombies[i]; //Bestämmer att det är olika zombies beronde av "i"
      
                picture(zombie.x, zombie.y, "http://spelprogrammering.nu/bilder/zombie.png"); //Ger en bild till zombien
      
                if (zombie.x < player.x) //Bestämmer vart på x-axeln som zombiesen ska gå. Dens rörelse kommer vara beroende av spelarens position
                    zombie.x += zombie.speed; //Den går till höger om spelaren är höger om zombien
                else
                   zombie.x -= zombie.speed; //Den går till vänster om spelaren är vänster om zombien
      
                if (zombie.y < player.y)
                    zombie.y += zombie.speed; //Den går upp om spelaren är över zombien
                else
                    zombie.y -= zombie.speed; //Och den går ner om spelaren är under zombien
                
                
                
                
                i += 1; //Plusar på i med 1.
              
               
              }
              if(hp < 0) //När mitt hp går under 0 så förlorar player, och därmed slutar spelet
              {
                alert("Game Over!"); //Gör så att ett meddelande kommer upp på skärmen som säger "Game Over!"
                stopUpdate() //Stoppar funktionen från att uppdatera vilket leder till att programmet slutar
      
              }
            
            
               if(distance(player, zombie) < 5){ //När spelaren är för nära zombien så tar den skada
                 hp -= 5; //Detta gör så att hp rektangel blir mindre
               }
      
            
            
          }
        
          
      </script>
</body>
</html>